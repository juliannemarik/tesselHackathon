"use strict";function e(r){if(!(this instanceof e))return new e(r);a.call(this,r),o.call(this,r),r&&!1===r.readable&&(this.readable=!1),r&&!1===r.writable&&(this.writable=!1),this.allowHalfOpen=!0,r&&!1===r.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",t)}function t(){this.allowHalfOpen||this._writableState.ended||h.nextTick(r,this)}function r(e){e.end()}var i,a,o,s,n,l,h=require("process-nextick-args"),d=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r};for(module.exports=e,(i=require("core-util-is")).inherits=require("inherits"),a=require("./_stream_readable"),o=require("./_stream_writable"),i.inherits(e,a),s=d(o.prototype),n=0;n<s.length;n++)l=s[n],e.prototype[l]||(e.prototype[l]=o.prototype[l]);Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),e.prototype._destroy=function(e,t){this.push(null),this.end(),h.nextTick(t,e)};