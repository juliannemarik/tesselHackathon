function e(e,i,s){t.call(this),this.readable=!0,this.writable=!0,this._needDrain=!1,this._paused=!1,this._reading=!1,this._ending=!1,this._ended=!1,this._remaining=0,this._queue=[],this._index=0,this._queueLen=0,this._read=this._read.bind(this),this.props={},this._header=e,this._extended=i||{},this._global={};var r=this;Object.keys(s||{}).forEach(function(e){r._global[e]=s[e]}),this._setProps()}module.exports=e,require("./header.js");var i=require("../tar"),t=(require("assert").ok,require("stream").Stream),s=require("inherits"),r=require("fstream").Abstract;s(e,t),e.prototype.write=function(e){this._ending&&this.error("write() after end()",null,!0),0===this._remaining&&this.error("invalid bytes past eof"),e.length>this._remaining&&(e=e.slice(0,this._remaining)),this._remaining-=e.length;var i=this._queueLen;return this._queue.push(e),this._queueLen++,this._read(),!(this._paused||i>0)||(this._needDrain=!0,!1)},e.prototype.end=function(e){e&&this.write(e),this._ending=!0,this._read()},e.prototype.pause=function(){this._paused=!0,this.emit("pause")},e.prototype.resume=function(){return this.emit("resume"),this._paused=!1,this._read(),this._queueLen-this._index>1},e.prototype._read=function(){var e,i;if(!(this._paused||this._reading||this._ended)){for(this._reading=!0;this._index<this._queueLen&&!this._paused;)e=this._queue[this._index++],this.emit("data",e);this._index>=this._queueLen&&(this._queue.length=this._queueLen=this._index=0,this._needDrain&&(this._needDrain=!1,this.emit("drain")),this._ending&&(this._ended=!0,this.emit("end"))),i=this._maxQueueLen,this._queueLen>i&&this._index>0&&(i=Math.min(this._index,i),this._index-=i,this._queueLen-=i,this._queue=this._queue.slice(i)),this._reading=!1}},e.prototype._setProps=function(){var e,t,s,r,n=this._header,h=this._extended,a=this._global,u=this.props,_=i.fields;for(e=0;null!==_[e];e++)void 0!==(s=n[t=_[e]])&&(u[t]=s);switch([a,h].forEach(function(e){Object.keys(e).forEach(function(i){void 0!==e[i]&&(u[i]=e[i])})}),["path","linkpath"].forEach(function(e){u.hasOwnProperty(e)&&(u[e]=u[e].split("\0")[0])}),["mtime","ctime","atime"].forEach(function(e){u.hasOwnProperty(e)&&(u[e]=new Date(1e3*u[e]))}),i.types[u.type]){case"OldFile":case"ContiguousFile":r="File";break;case"GNUDumpDir":r="Directory";break;case void 0:r="Unknown";break;case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":default:r=i.types[u.type]}this.type=r,this.path=u.path,this.size=u.size,this._remaining=u.size},e.prototype.warn=r.warn,e.prototype.error=r.error;