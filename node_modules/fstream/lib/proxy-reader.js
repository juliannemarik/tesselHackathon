function r(e){if(!(this instanceof r))throw Error("ProxyReader must be called as constructor.");this.props=e,this._buffer=[],this.ready=!1,t.call(this,e)}module.exports=r;var t=require("./reader.js"),e=require("./get-type.js"),o=require("inherits"),a=require("graceful-fs");o(r,t),r.prototype._stat=function(){var r=this,o=r.props,i=o.follow?"stat":"lstat";a[i](o.path,function(a,i){var n;n=a||!i?"File":e(i),o[n]=!0,o.type=r.type=n,r._old=i,r._addProxy(t(o,i))})},r.prototype._addProxy=function(r){var t,e=this;if(e._proxyTarget)return e.error("proxy already set");e._proxyTarget=r,r._proxy=e,["error","data","end","close","linkpath","entry","entryEnd","child","childEnd","warn","stat"].forEach(function(t){r.on(t,e.emit.bind(e,t))}),e.emit("proxy",r),r.on("ready",function(){e.ready=!0,e.emit("ready")}),t=e._buffer,e._buffer.length=0,t.forEach(function(t){r[t[0]].apply(r,t[1])})},r.prototype.pause=function(){return!!this._proxyTarget&&this._proxyTarget.pause()},r.prototype.resume=function(){return!!this._proxyTarget&&this._proxyTarget.resume()};