!function(){function n(n){var t=!1;return function(){if(t)throw Error("Callback was already called.");t=!0,n.apply(S,arguments)}}var t,e,r,i,u,c,o,a,l,f,s,p,d,y,h,m,v,g,k,A,x={},S=this;null!=S&&(t=S.async),x.noConflict=function(){return S.async=t,x},e=Object.prototype.toString,r=Array.isArray||function(n){return"[object Array]"===e.call(n)},i=function(n,t){for(var e=0;e<n.length;e+=1)t(n[e],e,n)},u=function(n,t){if(n.map)return n.map(t);var e=[];return i(n,function(n,r,i){e.push(t(n,r,i))}),e},c=function(n,t,e){return n.reduce?n.reduce(t,e):(i(n,function(n,r,i){e=t(e,n,r,i)}),e)},o=function(n){var t,e;if(Object.keys)return Object.keys(n);t=[];for(e in n)n.hasOwnProperty(e)&&t.push(e);return t},"undefined"!=typeof process&&process.nextTick?(x.nextTick=process.nextTick,"undefined"!=typeof setImmediate?x.setImmediate=function(n){setImmediate(n)}:x.setImmediate=x.nextTick):"function"==typeof setImmediate?(x.nextTick=function(n){setImmediate(n)},x.setImmediate=x.nextTick):(x.nextTick=function(n){setTimeout(n,0)},x.setImmediate=x.nextTick),x.each=function(t,e,r){function u(n){n?(r(n),r=function(){}):(c+=1)>=t.length&&r()}if(r=r||function(){},!t.length)return r();var c=0;i(t,function(t){e(t,n(u))})},x.forEach=x.each,x.eachSeries=function(n,t,e){var r,i;if(e=e||function(){},!n.length)return e();r=0,(i=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1)>=n.length?e():i()})})()},x.forEachSeries=x.eachSeries,x.eachLimit=function(n,t,e,r){a(t).apply(null,[n,e,r])},x.forEachLimit=x.eachLimit,a=function(n){return function(t,e,r){var i,u,c;if(r=r||function(){},!t.length||n<=0)return r();i=0,u=0,c=0,function o(){if(i>=t.length)return r();for(;c<n&&u<t.length;)c+=1,e(t[(u+=1)-1],function(n){n?(r(n),r=function(){}):(c-=1,(i+=1)>=t.length?r():o())})}()}},l=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[x.each].concat(t))}},f=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[a(n)].concat(e))}},s=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[x.eachSeries].concat(t))}},p=function(n,t,e,r){if(t=u(t,function(n,t){return{index:t,value:n}}),r){var i=[];n(t,function(n,t){e(n.value,function(e,r){i[n.index]=r,t(e)})},function(n){r(n,i)})}else n(t,function(n,t){e(n.value,function(n){t(n)})})},x.map=l(p),x.mapSeries=s(p),x.mapLimit=function(n,t,e,r){return d(t)(n,e,r)},d=function(n){return f(n,p)},x.reduce=function(n,t,e,r){x.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){r(n,t)})},x.inject=x.reduce,x.foldl=x.reduce,x.reduceRight=function(n,t,e,r){var i=u(n,function(n){return n}).reverse();x.reduce(i,t,e,r)},x.foldr=x.reduceRight,y=function(n,t,e,r){var i=[];n(t=u(t,function(n,t){return{index:t,value:n}}),function(n,t){e(n.value,function(e){e&&i.push(n),t()})},function(){r(u(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})},x.filter=l(y),x.filterSeries=s(y),x.select=x.filter,x.selectSeries=x.filterSeries,h=function(n,t,e,r){var i=[];n(t=u(t,function(n,t){return{index:t,value:n}}),function(n,t){e(n.value,function(e){e||i.push(n),t()})},function(){r(u(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})},x.reject=l(h),x.rejectSeries=s(h),m=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(){r()})},x.detect=l(m),x.detectSeries=s(m),x.some=function(n,t,e){x.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(){e(!1)})},x.any=x.some,x.every=function(n,t,e){x.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(){e(!0)})},x.all=x.every,x.sortBy=function(n,t,e){x.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);e(null,u(t.sort(function(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0}),function(n){return n.value}))})},x.auto=function(n,t){var e,u,a,l,f,s,p;if(t=t||function(){},e=o(n),!(u=e.length))return t();a={},l=[],s=function(n){for(var t=0;t<l.length;t+=1)if(l[t]===n)return void l.splice(t,1)},p=function(){u--,i(l.slice(0),function(n){n()})},(f=function(n){l.unshift(n)})(function(){if(!u){var n=t;t=function(){},n(null,a)}}),i(e,function(e){var u,l=r(n[e])?n[e]:[n[e]],d=function(n){var r,u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),n?(r={},i(o(a),function(n){r[n]=a[n]}),r[e]=u,t(n,r),t=function(){}):(a[e]=u,x.setImmediate(p))},y=l.slice(0,Math.abs(l.length-1))||[],h=function(){return c(y,function(n,t){return n&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(e)};h()?l[l.length-1](d,a):f(u=function(){h()&&(s(u),l[l.length-1](d,a))})})},x.retry=function(n,t,e){var r,i=[];return"function"==typeof n&&(e=t,t=n,n=5),n=parseInt(n,10)||5,r=function(r,u){for(var c=function(n,t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})},u)}};n;)i.push(c(t,!(n-=1)));x.series(i,function(n,t){t=t[t.length-1],(r||e)(t.err,t.result)})},e?r():r},x.waterfall=function(n,t){var e,i;return t=t||function(){},r(n)?n.length?void(i=function(n){return function(e){var r,u;e?(t.apply(null,arguments),t=function(){}):(r=Array.prototype.slice.call(arguments,1),(u=n.next())?r.push(i(u)):r.push(t),x.setImmediate(function(){n.apply(null,r)}))}})(x.iterator(n))():t():(e=Error("First argument to waterfall must be an array of functions"),t(e))},v=function(n,t,e){if(e=e||function(){},r(t))n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var i={};n.each(o(t),function(n,e){t[n](function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[n]=r,e(t)})},function(n){e(n,i)})}},x.parallel=function(n,t){v({map:x.map,each:x.each},n,t)},x.parallelLimit=function(n,t,e){v({map:d(t),each:a(t)},n,e)},x.series=function(n,t){if(t=t||function(){},r(n))x.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};x.eachSeries(o(n),function(t,r){n[t](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e[t]=i,r(n)})},function(n){t(n,e)})}},x.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},x.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}},g=function(n,t,e,r){var i=[];n(t,function(n,t){e(n,function(n,e){i=i.concat(e||[]),t(n)})},function(n){r(n,i)})},x.concat=l(g),x.concatSeries=s(g),x.whilst=function(n,t,e){n()?t(function(r){if(r)return e(r);x.whilst(n,t,e)}):e()},x.doWhilst=function(n,t,e){n(function(r){if(r)return e(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?x.doWhilst(n,t,e):e()})},x.until=function(n,t,e){n()?e():t(function(r){if(r)return e(r);x.until(n,t,e)})},x.doUntil=function(n,t,e){n(function(r){if(r)return e(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?e():x.doUntil(n,t,e)})},x.queue=function(t,e){function u(n,t,e,u){if(n.started||(n.started=!0),r(t)||(t=[t]),0==t.length)return x.setImmediate(function(){n.drain&&n.drain()});i(t,function(t){var r={data:t,callback:"function"==typeof u?u:null};e?n.tasks.unshift(r):n.tasks.push(r),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),x.setImmediate(n.process)})}var c,o;return void 0===e&&(e=1),c=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(n,t){u(o,n,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(n,t){u(o,n,!0,t)},process:function(){var e,r;!o.paused&&c<o.concurrency&&o.tasks.length&&(e=o.tasks.shift(),o.empty&&0===o.tasks.length&&o.empty(),c+=1,r=n(function(){c-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+c===0&&o.drain(),o.process()}),t(e.data,r))},length:function(){return o.tasks.length},running:function(){return c},idle:function(){return o.tasks.length+c===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var n=1;n<=o.concurrency;n++)x.setImmediate(o.process)}}}},x.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}var u=x.queue(n,t);return u.push=function(n,t,c){!function(n,t,u,c){if(n.started||(n.started=!0),r(t)||(t=[t]),0==t.length)return x.setImmediate(function(){n.drain&&n.drain()});i(t,function(t){var r={data:t,priority:u,callback:"function"==typeof c?c:null};n.tasks.splice(function(n,t,e){for(var r,i=-1,u=n.length-1;i<u;)e(t,n[r=i+(u-i+1>>>1)])>=0?i=r:u=r-1;return i}(n.tasks,r,e)+1,0,r),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),x.setImmediate(n.process)})}(u,n,t,c)},delete u.unshift,u},x.cargo=function(n,t){var e=!1,c=[],o={tasks:c,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,e){r(n)||(n=[n]),i(n,function(n){c.push({data:n,callback:"function"==typeof e?e:null}),o.drained=!1,o.saturated&&c.length===t&&o.saturated()}),x.setImmediate(o.process)},process:function r(){var a,l;if(!e){if(0===c.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);a="number"==typeof t?c.splice(0,t):c.splice(0,c.length),l=u(a,function(n){return n.data}),o.empty&&o.empty(),e=!0,n(l,function(){e=!1;var n=arguments;i(a,function(t){t.callback&&t.callback.apply(null,n)}),r()})}},length:function(){return c.length},running:function(){return e}};return o},k=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);void 0!==console&&(t?console.error&&console.error(t):console[n]&&i(e,function(t){console[n](t)}))}]))}},x.log=k("log"),x.dir=k("dir"),x.memoize=function(n,t){var e,r={},i={};return t=t||function(n){return n},e=function(){var e=Array.prototype.slice.call(arguments),u=e.pop(),c=t.apply(null,e);c in r?x.nextTick(function(){u.apply(null,r[c])}):c in i?i[c].push(u):(i[c]=[u],n.apply(null,e.concat([function(){var n,t,e;for(r[c]=arguments,n=i[c],delete i[c],t=0,e=n.length;t<e;t++)n[t].apply(null,arguments)}])))},e.memo=r,e.unmemoized=n,e},x.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},x.times=function(n,t,e){var r,i=[];for(r=0;r<n;r++)i.push(r);return x.map(i,t,e)},x.timesSeries=function(n,t,e){var r,i=[];for(r=0;r<n;r++)i.push(r);return x.mapSeries(i,t,e)},x.seq=function(){var n=arguments;return function(){var t=this,e=Array.prototype.slice.call(arguments),r=e.pop();x.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){r.apply(t,[n].concat(e))})}},x.compose=function(){return x.seq.apply(null,Array.prototype.reverse.call(arguments))},A=function(n,t){var e,r=function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},i)};return arguments.length>2?(e=Array.prototype.slice.call(arguments,2),r.apply(this,e)):r},x.applyEach=l(A),x.applyEachSeries=s(A),x.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof module&&module.exports?module.exports=x:"undefined"!=typeof define&&define.amd?define([],function(){return x}):S.async=x}();