function e(e,s){function a(e){var n={};return e.forEach(function(e){n[e]=e}),n}var c,f={};return r.root(e,function(o,l,c){var u,d;s.single||!l?!s.single&&n.lstatSync(e).isDirectory()?(f.warning=((o?o.message:"Warning.")+"").replace(/\.( |$)/,". Deploying just this directory."),l=n.realpathSync(e),c=n.lstatSync(i.join(e,"index.js"))&&"index.js",u=a(t.readdirRecursiveSync(e,{inflateSymlinks:!0,excludeHiddenUnix:!0}))):(f.warning=((o?o.message:"Warning.")+"").replace(/\.( |$)/,". Deploying just this file."),l=i.dirname(n.realpathSync(e)),c=i.basename(e),u=a([i.basename(e)])):(d={},"string"==typeof s.x&&(s.x=[s.x]),s.x&&s.x.forEach(function(e){d[e]=!1}),"string"==typeof s.i&&(s.i=[s.i]),s.i&&s.i.forEach(function(e){d[e]=!0}),c in(u=r.list(l,null,null,d))||(u[c]=c)),f.pushdir=l,f.relpath=c,f.files=u,Object.keys(f.files).forEach(function(e){f.files[e]=n.realpathSync(i.join(l,f.files[e]))})}),c={},Object.keys(f.files).forEach(function(e){c[e]=n.lstatSync(f.files[e]).size;var r=e;do{r=i.dirname(r),c[r+"/"]=(c[r+"/"]||0)+c[e]}while(i.dirname(r)!=r)}),s.verbose&&(Object.keys(c).sort().forEach(function(e){l.info(e.match(/\/$/)?" "+e.underline:" â†’ "+e,"("+o.filesize(c[e])+")")}),l.info("Total file size:",o.filesize(c["./"]||0))),f.size=c["./"]||0,f}var n=require("fs"),i=require("path"),r=require("hardware-resolve"),t=require("effess"),o=require("humanize"),s=require("../"),l=require("../src/logs");s.bundleScript=function(n,i,r,t){var o,a;"function"==typeof r&&(t=r,r={}),o=!r.quiet,(a=e(n,r)).warning&&o&&l.warn(a.warning),o&&l.info("Bundling directory "+a.pushdir),s.bundleFiles(a.relpath,i,a.files,r,t)},s.Tessel.prototype.run=function(e,i,r,t){var a,c=this;"function"==typeof r&&(t=r,r={}),a=!r.quiet,s.bundleScript(e,i,r,function(e,i){a&&l.info("Deploying bundle ("+o.filesize(i.length)+")..."),r.savePath?n.writeFile(r.savePath,i,function(){c.deployBundle(i,r,t)}):c.deployBundle(i,r,t)})},s.analyzeScript=e,s.script=function(e,n,i){s.findTessel({},function(r,t){if(r)throw Error("No tessel connected, aborting: "+r);t.run(e,n,function(e){t.on("error",function(e){l.err("Cannot connect to Tessel locally.",e)}),l.info("uploading tessel code..."),t.once("script-stop",function(){t.close()}),i(e,t)})})};