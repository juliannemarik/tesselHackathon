function t(t){return t&&"realpath"===t.syscall&&("ELOOP"===t.code||"ENOMEM"===t.code||"ENAMETOOLONG"===t.code)}function e(e,r,n){if(l)return a(e,r,n);"function"==typeof r&&(n=r,r=null),a(e,r,function(a,c){t(a)?u.realpath(e,r,n):n(a,c)})}function r(e,r){if(l)return c(e,r);try{return c(e,r)}catch(n){if(t(n))return u.realpathSync(e,r);throw n}}var n,a,c,o,l,u;module.exports=e,e.realpath=e,e.sync=r,e.realpathSync=r,e.monkeypatch=function(){n.realpath=e,n.realpathSync=r},e.unmonkeypatch=function(){n.realpath=a,n.realpathSync=c},n=require("fs"),a=n.realpath,c=n.realpathSync,o=process.version,l=/^v[0-5]\./.test(o),u=require("./old.js");