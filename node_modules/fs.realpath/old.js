var e,n,t=require("path"),r="win32"===process.platform,o=require("fs"),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);t.normalize,e=r?/(.*?)(?:[\/\\]+|$)/g:/(.*?)(?:[\/]+|$)/g,n=r?/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:/^[\/]*/,exports.realpathSync=function(s,i){function c(){var e=n.exec(s);u=e[0].length,p=e[0],v=e[0],y="",r&&!f[v]&&(o.lstatSync(v),f[v]=!0)}var l,a,f,u,p,v,y,h,g,x,O,S;if(s=t.resolve(s),i&&Object.prototype.hasOwnProperty.call(i,s))return i[s];for(l=s,a={},f={},c();u<s.length;)if(e.lastIndex=u,h=e.exec(s),y=p,p+=h[0],v=y+h[1],u=e.lastIndex,!(f[v]||i&&i[v]===v)){if(i&&Object.prototype.hasOwnProperty.call(i,v))g=i[v];else{if(!(x=o.lstatSync(v)).isSymbolicLink()){f[v]=!0,i&&(i[v]=v);continue}O=null,r||(S=x.dev.toString(32)+":"+x.ino.toString(32),a.hasOwnProperty(S)&&(O=a[S])),null===O&&(o.statSync(v),O=o.readlinkSync(v)),g=t.resolve(y,O),i&&(i[v]=g),r||(a[S]=O)}s=t.resolve(g,s.slice(u)),c()}return i&&(i[l]=s),s},exports.realpath=function(i,c,l){function a(){var e=n.exec(i);x=e[0].length,O=e[0],S=e[0],k="",r&&!g[S]?o.lstat(S,function(e){if(e)return l(e);g[S]=!0,f()}):process.nextTick(f)}function f(){if(x>=i.length)return c&&(c[y]=i),l(null,i);e.lastIndex=x;var n=e.exec(i);return k=O,O+=n[0],S=k+n[1],x=e.lastIndex,g[S]||c&&c[S]===S?process.nextTick(f):c&&Object.prototype.hasOwnProperty.call(c,S)?v(c[S]):o.lstat(S,u)}function u(e,n){if(e)return l(e);if(!n.isSymbolicLink())return g[S]=!0,c&&(c[S]=S),process.nextTick(f);if(!r){var t=n.dev.toString(32)+":"+n.ino.toString(32);if(h.hasOwnProperty(t))return p(null,h[t],S)}o.stat(S,function(e){if(e)return l(e);o.readlink(S,function(e,n){r||(h[t]=n),p(e,n)})})}function p(e,n,r){if(e)return l(e);var o=t.resolve(k,n);c&&(c[r]=o),v(o)}function v(e){i=t.resolve(e,i.slice(x)),a()}var y,h,g,x,O,S,k;if("function"!=typeof l&&(l="function"==typeof c?c:function(){function e(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var n="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(n):console.error(n)}}}var n,t;return s?(t=Error(),n=function(n){n&&(t.message=n.message,e(n=t))}):n=e,n}(),c=null),i=t.resolve(i),c&&Object.prototype.hasOwnProperty.call(c,i))return process.nextTick(l.bind(null,null,c[i]));y=i,h={},g={},a()};