var n=require("wrappy"),e=Object.create(null),r=require("once");module.exports=n(function(n,l){return e[n]?(e[n].push(l),null):(e[n]=[l],function(n){return r(function r(){var l,t=e[n],u=t.length,c=function(n){for(var e=n.length,r=[],l=0;l<e;l++)r[l]=n[l];return r}(arguments);try{for(l=0;l<u;l++)t[l].apply(null,c)}finally{t.length>u?(t.splice(0,u),process.nextTick(function(){r.apply(null,c)})):delete e[n]}})}(n))});